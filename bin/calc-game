#! /usr/bin/env node

var readline  = require('readline');
var chalk     = require('chalk');
var calc      = require('../lib/calc')();

var rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

var show = function(question) {
  var out = '';
  question.forEach(function(x, i) {
    if (0 === (i % 2)) {
      out += chalk.green(x);
    } else {
      out += chalk.red(' ' + x + ' ');
    }
  });
  return out + chalk.blue(' = ');
};

var play = function() {
  /** 请求出题 */
  var game = calc();

  rl.question(show(game.question), function (answer) {
    if ('exit' === answer) return exit();
    if (game.answer(answer)) {
      console.log(chalk.green(' √'));
      return play();
    }
    console.log(chalk.red(' X'));
    exit();
  });
};

var exit = function() {
  process.exit();
};

play();
